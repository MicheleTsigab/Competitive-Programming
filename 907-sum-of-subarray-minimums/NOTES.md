for each element determine where it is the smallest for  some range, use monotonic increasing stack to find that range, then there will be n*m ranges where n is number of elements before the element including the element and m is the number of  elements after the element including the element.   There are 4 elements before (and including) 2 - [3,4,5,2] and 3 elements are after (and including) 2- [2,3,4]. So the total is 3∗4=123∗4=12.